<% content_for :banner_title do %>
<%= fa_icon 'gears lg' %>&nbsp;Domains
<% end %>

<section>
  <div id="MyDomains">
    <div class="pull-right">
      <span class="text-danger"></span>
    </div>
    <div class="info-header">
      <h3>
        <%= link_to domains_path, :class => 'btn btn-default btn-xs back-btn' do %>
          <i class="fa fa-chevron-left"></i>
        <% end %> <%= @domain.name %>
      </h3>
    </div>
    <div></div>
    <span class="sr-only"><strong>Domain Status:</strong> Active</span>
    <div class="dom-status-icon">
      <i class="fa fa-circle green" data-toggle="tooltip" data-placement="right" title="OK"></i>
      <i class="fa fa-circle grey" data-toggle="tooltip" data-placement="right" title="INACTIVE"></i>
      <i class="fa fa-hand-paper-o red" data-toggle="tooltip" data-placement="right" title="&#215; CLIENT Hold"></i>
      <i class="fa fa-trash red" data-toggle="tooltip" data-placement="right" title="&#215; CLIENT Delete Prohibit"></i>
      <i class="fa fa-refresh red" data-toggle="tooltip" data-placement="right" title="&#215; CLIENT Renew"></i>
      <i class="fa fa-arrow-circle-o-right red" data-toggle="tooltip" data-placement="right" title="&#215; CLIENT Transfer"></i>
      <i class="glyphicon glyphicon-repeat red" data-toggle="tooltip" data-placement="right" title="&#215; CLIENT Update"></i>
    </div>
    <div id="dom-reg-date">Registration Date: <%= formatted_date @domain.registered_at %></div>
    <div id="dom-exp-date">Expiration Date: <%= formatted_date @domain.expires_at %></div>
    
    <br>
    <!--new-->
    <h4> Domain Information</h4>
    <div class="contact-info-wrapper">
      
      <div class="title">Registrant</div>
      <div class="contact-info"><%= render partial: 'domains/domain_contact', locals: { contact: @domain.registrant } %></div>
      <div class="button">
        <% if current_user.staff %>
          <%= link_to 'Edit', contact_path(@domain.registrant.handle, d: @domain.id), id: 'edit_registrant', :class => 'btn btn-primary btn-small' %>
        <% end %>
      </div>
    </div>

    <% if @domain.admin_handle %>
    <div class="contact-info-wrapper">
      <div class="title">Administrative</div>
      <div class="contact-info"><%= render partial: 'domains/domain_contact', locals: { contact: @domain.admin_contact } %></div>
      <div class="button">
        <% if current_user.staff %>
          <%= link_to '', :class => 'btn btn-default' do %>   Edit
          <% end %>
        <% end %>
      </div>
    </div>
    <% end %>

    <% if @domain.billing_handle %>
    <div class="contact-info-wrapper">
      <div class="title">Billing</div>
      <div class="contact-info"><%= render partial: 'domains/domain_contact', locals: { contact: @domain.billing_contact } %></div>
      <div class="button">
        <% if current_user.staff %>
          <%= link_to '', :class => 'btn btn-default' do %>   Edit
          <% end %>
        <% end %>
      </div>
    </div>
    <% end %>

    <% if @domain.tech_handle %>
    <div class="contact-info-wrapper">
      <div class="title">Technical</div>
      <div class="contact-info"><%= render partial: 'domains/domain_contact', locals: { contact: @domain.tech_contact } %></div>
      <div class="button">
        <% if current_user.staff %>
          <%= link_to '', :class => 'btn btn-default' do %>   Edit
          <% end %>
        <% end %>
      </div>
    </div>   
    <% end %>
    
    <br>

    <div class="pull-right">
    <% if current_user.staff %>
      <a class="btn-link"><i class="fa fa-plus"></i> Add Nameservers </a>
    <% end %>
    </div>

    <h4>Nameservers</h4>
    
    <% unless @domain.hosts.empty? %>
    <div class="contact-info-wrapper">
      <div class="title">Nameservers</div>
      <div class="contact-info">
        <ul>
          <% @domain.hosts.each do |domain_host| %>
          <li><%= domain_host.name %></li>
          <% end %>
        </ul>
      </div>
    </div>
    
    <% else %>
    No Nameservers
    <% end %>
    
    <br>
    
    <div class="pull-right"><a class="btn-link"><i class="fa fa-list-ul"></i> View All</a></div>
    <h4>Domain Activity</h4>
    <div class="contact-info-wrapper">
      <div class="title">Activities</div>
      <div class="contact-info">
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <% @domain.activities.each do |activity| %>
            <tr>
              <td><%= formatted_timestamp activity.activity_at %></td>
              <td><%= activity_description(activity).html_safe %></td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</section>


