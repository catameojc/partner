<% content_for :banner_title do %>
<%= fa_icon 'gears lg' %>&nbsp;Domains
<% end %>

<section>
  <div id="MyDomains">
    <div class="pull-right">
      <span class="text-danger"></span>
    </div>
    <h3><strong><%= @domain.name %></strong></h3>
    <div class=" "></div>
    <span class="sr-only"><strong>Domain Status:</strong> Active</span>
    <div id="dom-reg-date">Registered Date: <%= formatted_date @domain.registered_at %></div>
    <div id="dom-exp-date">Expiry Date: <%= formatted_date @domain.expires_at %></div>
    <div><br></div>

    <ul id="tab-list" class="dm" role="tablist">
      <li class="active"><a href="#info" role="tab" data-toggle="tab">Domain Info</a></li>
      <li><a href="#nameservers" role="tab" data-toggle="tab">Nameservers</a></li>
      <li><a href="#domain_activity" role="tab" data-toggle="tab">Domain Activity</a></li>
    </ul>
    <div class="tab-content">
      <!--domain info-->
      <div class="active" id="info"><!-- tab-pane -->
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" id="domain-info-tab" role="tablist">
          <li role="presentation" class="active"><a href="#registrant-contact" aria-controls="registrant-contact" role="tab" data-toggle="tab">Registrant Contact</a></li>
           <li role="presentation"><a href="#admin-contact" aria-controls="admin-contact" role="tab" data-toggle="tab">Admin Contact</a></li>
          <li role="presentation"><a href="#billing-contact" aria-controls="billing-contact" role="tab" data-toggle="tab">Billing Contact</a></li>
          <li role="presentation"><a href="#technical-contact" aria-controls="technical-contact" role="tab" data-toggle="tab">Technical Contact</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content" id="domain-info-tab-content">
          <div role="tabpanel" class="tab-pane active" id="registrant-contact">
            <a onclick="showEditContact()">Edit Contact Details</a>
            <%= render partial: 'domain_contact', locals: { contact: @domain.registrant } %>
            <a onclick="showEditContact()">Edit Contact Details</a>
          </div>
          <div role="tabpanel" class="tab-pane" id="registrant-contact-edit">
            <a onclick="hideEditContact()">Cancel</a>
            <%= render partial: 'domain_contact_edit', locals: { contact: @domain.registrant } %>
            <a onclick="hideEditContact()">Cancel</a>
          </div>
          <div role="tabpanel" class="tab-pane" id="admin-contact">
            <%= render partial: 'domain_contact', locals: { contact: @domain.admin_contact } %>
          </div>
          <div role="tabpanel" class="tab-pane" id="billing-contact">
            <%= render partial: 'domain_contact', locals: { contact: @domain.billing_contact } %>
          </div>
          <div role="tabpanel" class="tab-pane" id="tech-contact">
            <%= render partial: 'domain_contact', locals: { contact: @domain.tech_contact } %>
          </div>
        </div>
      </div>
      <!--domain info-->
      <!--nameservers-->
      <div id="nameservers"><!-- tab-pane -->
        <h5>Nameservers</h5>
        <hr>
        <table id="domain_hosts">
          <thead>
            <tr>
              <th>Nameserver</th>
            </tr>
          </thead>
          <tbody>
            <% @domain.hosts.each do |host| %>
            <tr>
              <td><%= host.name %></td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <!--name servers-->
      <!--domain activity-->
      <div id="domain_activity"><!-- tab-pane -->
        <h5>Domain Activity</h5>
        <hr>
        <div>
          <div>
            <table id="domain_activities">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <% @domain.activities.each do |activity| %>
                <tr>
                  <td><%= formatted_timestamp activity.activity_at %></td>
                  <td><%= activity_description(activity).html_safe %></td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <br>
        </div>
      </div>
      <!--domain activity-->
    </div>
  </div>
</div>
