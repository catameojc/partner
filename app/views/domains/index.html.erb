<% content_for :banner_title do %>
  <%= fa_icon 'gears lg' %>&nbsp;Domains
    <% unless current_user.admin %>
      <span><%= @domains.count %></span>
    <% end %>
<% end %>
<!--buttons for bulk options-->
<p class="btn-container">
  <button type="button" class="btn btn-primary btn-bulk-modal" data-toggle="modal" data-target="#modal-editc">
    <i class="fa fa-pencil-square-o"></i>
    <span>Edit Contact Information</span>
  </button>
  <button type="button" class="btn btn-success btn-bulk-modal" data-toggle="modal" data-target="#modal-brenew">
    <i class="fa fa-refresh "></i>
    <span>Bulk Renew</span>
  </button>
  <!--
  <a class="btn btn-default">
    <i class="fa fa-file-o "></i>
    <span>Export to File</span>
  </a>
  -->
</p>
<!--buttons for bulk options-->

<!--modal-->
<%= render "bulk_edit_modal" %>
<%= render "bulk_renew_term_modal" %>
<%= render "renew_term_modal" %>

<div id="table">
  <table id="domains">
    <thead>
      <tr>
        <th>
          <input id="checkall" type="checkbox" />
          <label for="checkall"></label></th>
        <th>Domain</th>
        <% if current_user.admin %>
        <th>Partner</th>
        <% end %>
        <th>Registration Date</th>
        <th>Expiry Date</th>
        <th>Renew</th>
      </tr>
    </thead>
    <tbody>
      <% @domains.each do |domain| %>
        <% if domain.expired? %>
          <% tr_class = 'expire' %>
          <% original_title = 'This domain has expired. You should renew it now.' %>
        <% elsif domain.expiring? %>
          <% tr_class = 'expire' %>
          <% original_title = 'This domain is about to expire. You should renew it now.' %>
        <% else %>
          <% tr_class = '' %>
          <% original_title = '' %>
        <% end %>

        <tr class=<%= tr_class %>>
          <td>
            <input id="domain<%= domain.id %>" class="domain-list-checkbox"
              data-name=<%= domain.name%> type="checkbox"/>
            <label for="domain<%= domain.id %>"></label>
          </td>
          <td class=<%= tr_class %>><%= link_to domain.name, domain_path(domain),
            data: { placement: :right, toggle: :tooltip, original_title: original_title } %></td>
          <% if current_user.admin %>
          <td><%= domain.partner %></td>
          <% end %>
          <td><%= formatted_date domain.registered_at %></td>
          <td><%= formatted_date domain.expires_at %></td>
          <td>
            <% if domain.renew_allowed? %>
              <a href="#" class="btn-renew-link" data-toggle="modal"
                data-target="#modal-renew" data-domain=<%= domain.id %>>
                Renew
              </a>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
